# 學生修課分數計算系統 - 使用指南

## 系統概述

這是一個基於Django框架開發的學生修課分數計算系統。系統提供了完整的課程管理、選課管理和成績追蹤功能。

## 核心功能

### 1. 首頁（首頁）
- **URL**: `http://127.0.0.1:8000/`
- **功能**: 系統首頁，提供三個主要功能的快速導航
  - 我的成績單
  - 課程列表
  - 新增課程

### 2. 成績單（學生成績主頁）
- **URL**: `http://127.0.0.1:8000/dashboard/`
- **功能**:
  - 顯示學生基本信息（學號、姓名、信箱）
  - 顯示修習課程清單
  - 顯示每科的期中、期末、科目分數
  - 顯示總平均分數
  - 可以退選課程

### 3. 課程列表
- **URL**: `http://127.0.0.1:8000/courses/`
- **功能**:
  - 顯示所有課程
  - 顯示每門課的課號、課名、任課老師、學分、選修人數
  - 可以點擊課名查看課程詳情
  - 可以選課（加選）
  - 可以編輯課程

### 4. 課程詳情
- **URL**: `http://127.0.0.1:8000/course/<course_id>/`
- **功能**:
  - 顯示課程詳細信息（課號、課名、任課老師、學分、課程描述）
  - 顯示修課學生名單
  - 顯示學生的期中、期末、科目分數
  - 顯示課程滿班狀態

### 5. 新增課程
- **URL**: `http://127.0.0.1:8000/course/add/`
- **功能**:
  - 新增課程到系統
  - 填寫課號、課名、任課老師、學分、課程描述、最大選修人數

### 6. 編輯課程
- **URL**: `http://127.0.0.1:8000/course/<course_id>/edit/`
- **功能**: 編輯已有課程的信息

### 7. 選課
- **URL**: `http://127.0.0.1:8000/course/<course_id>/enroll/`
- **功能**: 學生加選課程

### 8. 退選課程
- **URL**: 通過成績單頁面的退選按鈕
- **功能**: 學生退選課程

## 管理員後台

### 訪問管理後台
- **URL**: `http://127.0.0.1:8000/admin/`
- **用戶名**: `admin`
- **密碼**: 需要在創建超級用戶時設置，或使用以下命令重設：

```bash
python manage.py changepassword admin
```

### 後台功能

#### 1. 學生管理
- 添加、編輯、刪除學生記錄
- 查看學生的學號、姓名、信箱
- 搜索學生

#### 2. 課程管理
- 添加、編輯、刪除課程
- 查看課程信息和選修人數
- 搜索課程

#### 3. 選課記錄管理
- 查看學生選課記錄
- 直接在列表頁輸入期中、期末分數
- 管理課程選修狀態

## 數據結構

### 學生（Student）
```
- 學號（student_id）
- 姓名（name）
- 信箱（email）
- 建立時間（created_at）
```

### 課程（Course）
```
- 課號（course_code）
- 課名（course_name）
- 任課老師（instructor）
- 學分（credits）
- 課程描述（description）
- 最大選修人數（max_students）
- 建立時間（created_at）
```

### 選課記錄（Enrollment）
```
- 學生（student）
- 課程（course）
- 期中分數（midterm_score）
- 期末分數（final_score）
- 是否選修中（is_active）
- 選課時間（enrolled_at）
- 更新時間（updated_at）
```

## 成績計算

### 科目分數計算
- **科目分數** = （期中分數 + 期末分數）/ 2

### 平均分數計算
- **平均分數** = 所有選修課科目分數之總和 / 課程數

## 系統初始化

### 啟動服務器前的準備

#### 1. 虛擬環境已配置
虛擬環境位於 `.venv` 目錄

#### 2. 數據庫已初始化
```bash
python manage.py makemigrations
python manage.py migrate
```

#### 3. 超級用戶已建立
```bash
python manage.py createsuperuser
```

#### 4. 初始數據已載入
```bash
python init_data.py
```

### 啟動服務器
```bash
python manage.py runserver
```

服務器將在 `http://127.0.0.1:8000/` 上運行

## 使用流程

### 第一次使用

1. **訪問首頁**
   - 打開 `http://127.0.0.1:8000/`
   - 查看系統功能介紹

2. **查看成績單**
   - 點擊「我的成績單」
   - 可以看到已選課程的分數信息

3. **瀏覽課程**
   - 點擊「課程列表」
   - 查看所有可選課程

4. **查看課程詳情**
   - 點擊課程名稱
   - 查看課程信息和修課學生名單

5. **新增課程**
   - 點擊「新增課程」
   - 填寫課程信息並提交

6. **加選課程**
   - 在課程列表頁點擊「選課」按鈕
   - 課程將被添加到成績單

### 管理員操作

1. **登錄管理後台**
   - 訪問 `http://127.0.0.1:8000/admin/`
   - 使用管理員憑證登錄

2. **管理學生**
   - 在學生管理區域添加或編輯學生

3. **管理課程**
   - 添加、編輯或刪除課程

4. **輸入成績**
   - 在選課記錄管理中輸入期中和期末分數

## 文件結構

```
djangofinalhw/
├── gradeSystem/           # 項目設置目錄
│   ├── settings.py        # Django設置
│   ├── urls.py            # 主URL配置
│   ├── wsgi.py
│   └── asgi.py
├── courses/               # 課程應用
│   ├── models.py          # 數據模型
│   ├── views.py           # 視圖函數
│   ├── urls.py            # 應用URL配置
│   ├── forms.py           # 表單類
│   ├── admin.py           # 管理後台配置
│   ├── migrations/        # 數據庫遷移
│   └── templates/
│       └── courses/       # HTML模板
│           ├── base.html
│           ├── index.html
│           ├── student_dashboard.html
│           ├── course_list.html
│           ├── course_detail.html
│           ├── add_course.html
│           └── edit_course.html
├── manage.py              # Django管理命令
├── init_data.py           # 初始化數據腳本
└── db.sqlite3             # SQLite數據庫
```

## 常見操作

### 添加新學生
1. 進入管理後台（/admin/）
2. 點擊「學生」
3. 點擊「添加學生」
4. 填寫學號、姓名、信箱
5. 保存

### 修改成績
1. 進入管理後台（/admin/）
2. 點擊「選課記錄」
3. 找到要修改的記錄
4. 在列表頁直接編輯期中或期末分數
5. 保存

### 刪除課程
1. 進入管理後台（/admin/）
2. 點擊「課程」
3. 選擇要刪除的課程
4. 點擊刪除

### 批量操作
在管理後台的列表頁，可以選中多個項目進行批量操作。

## 技術棧

- **框架**: Django 6.0
- **數據庫**: SQLite3
- **模板引擎**: Django Template Engine
- **前端框架**: Bootstrap 5.1.3
- **Python版本**: 3.10+

## 注意事項

1. **開發環境**: 此系統為開發環境，不適合生產環境使用
2. **數據庫**: 使用SQLite，適合小規模應用
3. **安全**: 請勿在生產環境中使用DEBUG=True和默認SECRET_KEY
4. **性能**: 對於大規模課程和學生，需要優化查詢和添加索引

## 故障排除

### 常見問題

1. **頁面不顯示**
   - 檢查服務器是否運行
   - 檢查URL是否正確
   - 查看控制台錯誤信息

2. **成績無法保存**
   - 檢查分數是否在0-100範圍內
   - 檢查成績值是否有效

3. **課程無法選課**
   - 檢查課程是否已滿班
   - 檢查學生是否已選修此課程

### 獲取幫助

- 檢查Django官方文檔: https://docs.djangoproject.com/
- 查看應用日誌和錯誤信息
- 檢查管理後台的數據完整性

## 更新和維護

### 更新依賴
```bash
pip install --upgrade django
```

### 備份數據庫
```bash
# SQLite數據庫備份
cp db.sqlite3 db.sqlite3.backup
```

### 清除遷移
```bash
python manage.py migrate courses zero
```

## 許可證

此項目為學習用途開發。

---

最後更新: 2024年12月23日
